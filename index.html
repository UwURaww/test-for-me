<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Raw Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9fafb;
      color: #111827;
    }
    header {
      position: sticky;
      top: 0;
      background: #fff;
      border-bottom: 1px solid #e5e7eb;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header h1 {
      font-size: 18px;
      font-weight: bold;
    }
    button {
      background: #2563eb;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover { background: #1e40af; }
    .container { max-width: 900px; margin: 20px auto; padding: 0 16px; }
    .card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .card-title { font-weight: bold; font-size: 15px; }
    pre {
      background: #f3f4f6;
      padding: 12px;
      border-radius: 8px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 13px;
      font-family: monospace;
    }
    .actions button {
      margin-left: 6px;
      background: #f3f4f6;
      color: #111827;
    }
    .actions button:hover { background: #e5e7eb; }
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
    }
    .modal-content input {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <header>
    <button id="addBtn">Add Script</button>
    <h1>GitHub Raw Viewer</h1>
  </header>  <div class="container" id="scriptList"></div>  <div class="modal" id="modal">
    <div class="modal-content">
      <h2 style="margin-bottom:12px;">Add New Script</h2>
      <input type="text" id="scriptName" placeholder="Script Name">
      <input type="text" id="scriptUrl" placeholder="Raw GitHub Link">
      <div style="text-align:right;">
        <button onclick="closeModal()">Cancel</button>
        <button onclick="confirmAdd()">Confirm</button>
      </div>
    </div>
  </div>  <script>
    const listEl = document.getElementById('scriptList');
    const modal = document.getElementById('modal');
    const nameInput = document.getElementById('scriptName');
    const urlInput = document.getElementById('scriptUrl');
    let scripts = JSON.parse(localStorage.getItem('scripts') || '[]');

    function render() {
      listEl.innerHTML = '';
      if (scripts.length === 0) {
        listEl.innerHTML = '<p style="text-align:center; color:#6b7280;">No scripts yet. Add one!</p>';
        return;
      }
      scripts.forEach((s, i) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-header">
            <span class="card-title">${s.name}</span>
            <div class="actions">
              <button onclick="copyScript(${i})">Copy</button>
              <button onclick="refreshScript(${i})">Refresh</button>
              <button onclick="deleteScript(${i})" style="color:red;">Delete</button>
            </div>
          </div>
          <pre>${s.content || 'Loading...'}</pre>`;
    listEl.appendChild(card);
  });
}

async function fetchContent(url) {
  const res = await fetch(url);
  if (!res.ok) throw new Error('Failed to fetch');
  return await res.text();
}

async function confirmAdd() {
  const name = nameInput.value.trim();
  const url = urlInput.value.trim();
  if (!name || !url) { alert('Please enter name and URL'); return; }
  try {
    const content = await fetchContent(url);
    scripts.unshift({ name, url, content });
    localStorage.setItem('scripts', JSON.stringify(scripts));
    closeModal();
    render();
  } catch (e) {
    alert('Error: ' + e.message);
  }
}

function copyScript(i) {
  navigator.clipboard.writeText(scripts[i].content);
  alert('Copied!');
}

async function refreshScript(i) {
  try {
    const content = await fetchContent(scripts[i].url);
    scripts[i].content = content;
    localStorage.setItem('scripts', JSON.stringify(scripts));
    render();
  } catch (e) {
    alert('Refresh failed: ' + e.message);
  }
}

function deleteScript(i) {
  if (confirm('Delete this script?')) {
    scripts.splice(i, 1);
    localStorage.setItem('scripts', JSON.stringify(scripts));
    render();
  }
}

function openModal() {
  modal.style.display = 'flex';
  nameInput.value = '';
  urlInput.value = '';
}

function closeModal() { modal.style.display = 'none'; }

document.getElementById('addBtn').onclick = openModal;
window.onclick = (e) => { if (e.target === modal) closeModal(); };

render();

  </script>
</body>
</html>a>
                  </div>
                </CardContent>
              </Card>
            </motion.div>
          ))}
        </AnimatePresence>
      </div>
    )}
  </main>

  {/* Add Script Modal */}
  <Dialog open={isAddOpen} onOpenChange={setIsAddOpen}>
    <DialogContent className="rounded-2xl sm:max-w-lg">
      <DialogHeader>
        <DialogTitle>Add a new script</DialogTitle>
      </DialogHeader>
      <div className="space-y-4">
        <div className="space-y-2">
          <Label htmlFor="name">Script name (title)</Label>
          <Input
            id="name"
            placeholder="e.g. Teleport Tool"
            value={newName}
            onChange={(e) => setNewName(e.target.value)}
            className="rounded-2xl"
          />
        </div>
        <div className="space-y-2">
          <Label htmlFor="url">Raw GitHub link</Label>
          <Input
            id="url"
            placeholder="https://raw.githubusercontent.com/user/repo/branch/path/file.lua"
            value={newUrl}
            onChange={(e) => setNewUrl(e.target.value)}
            className="rounded-2xl"
          />
          <p className="text-xs text-slate-500">
            Tip: open your file on GitHub and click <span className="font-medium">Raw</span>, then copy the URL.
          </p>
        </div>
      </div>
      <DialogFooter>
        <Button variant="outline" className="rounded-2xl" onClick={() => setIsAddOpen(false)}>
          Cancel
        </Button>
        <Button className="rounded-2xl" onClick={addScript} disabled={!!loadingId}>
          {loadingId ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : null}
          Confirm
        </Button>
      </DialogFooter>
    </DialogContent>
  </Dialog>

  {/* Owner Mode Dialog */}
  <Dialog open={showOwnerDialog} onOpenChange={setShowOwnerDialog}>
    <DialogContent className="rounded-2xl sm:max-w-md">
      <DialogHeader>
        <DialogTitle>{ownerPassSet ? "Enter owner passcode" : "Set an owner passcode"}</DialogTitle>
      </DialogHeader>
      <div className="space-y-2">
        <Label htmlFor="pass">Passcode (this device only)</Label>
        <Input
          id="pass"
          type="password"
          placeholder={ownerPassSet ? "Enter your passcode" : "Create a passcode (min 4 chars)"}
          value={passInput}
          onChange={(e) => setPassInput(e.target.value)}
          className="rounded-2xl"
        />
        <p className="text-xs text-slate-500">
          The passcode is saved locally on <span className="font-medium">this device only</span> and never uploaded.
        </p>
      </div>
      <DialogFooter>
        <Button variant="outline" className="rounded-2xl" onClick={() => setShowOwnerDialog(false)}>
          Cancel
        </Button>
        <Button className="rounded-2xl" onClick={handleOwnerConfirm}>
          {ownerPassSet ? "Unlock" : "Save & Enable"}
        </Button>
      </DialogFooter>
    </DialogContent>
  </Dialog>

  <footer className="max-w-6xl mx-auto px-4 py-8 text-xs text-slate-500">
    <Separator className="mb-4" />
    <p>
      <span className="font-medium">Note:</span> Scripts and passcode are stored in your browser's localStorage. To restrict adding scripts to your
      device, keep Owner Mode locked on other devices.
    </p>
  </footer>
</div>

); }

function EmptyState({ ownerMode, onAdd }) { return ( <div className="flex flex-col items-center justify-center py-24 text-center"> <div className="mb-6"> <motion.div initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} transition={{ duration: 0.3 }} className="h-16 w-16 rounded-2xl grid place-items-center shadow bg-white border" > <Lock className="h-8 w-8" /> </motion.div> </div> <h2 className="text-xl font-semibold mb-2">No scripts yet</h2> <p className="text-sm text-slate-600 max-w-md"> Add GitHub <span className="font-medium">RAW</span> links and read them here with clean formatting. Everything stays on this device. </p> <div className="mt-6"> {ownerMode ? ( <Button onClick={onAdd} className="rounded-2xl"> <Plus className="mr-2 h-4 w-4" /> Add your first script </Button> ) : ( <div className="text-sm text-slate-500"> Enable <span className="font-medium">Owner Mode</span> to add scripts. </div> )} </div> </div> ); }

